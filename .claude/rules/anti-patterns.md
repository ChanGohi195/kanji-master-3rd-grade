# アンチパターン

## 同一ドメインでの反復改良

**発見日**: 2026-02-05
**分類**: anti-pattern
**根拠**: .ops/logs/2026-02-05.log（4回失敗→ドメイン変更で解決）
**内容**:
- 同じ抽象度で指標を入れ替えても問題が解けない場合、そのドメインでは原理的に解けない可能性が高い
- 実例: 画像比較（cosine→softF1→IoU）を4回改良しても全敗。ストローク数（メタデータ）に上げて解決
- **2回失敗したら立ち止まり、別ドメインの情報源を検討する**

## 有限集合にアルゴリズム的解法を適用

**発見日**: 2026-02-04
**分類**: anti-pattern
**根拠**: .ops/2026-02-04.md Context Strategy
**内容**:
- モーラベース自動分割は日本語音韻論の複雑さで破綻した
- 対象が有限集合（小3漢字200字の熟語）なら辞書ベースが確実
- **汎用アルゴリズムより辞書/テーブルを最初に検討する**

## 表示層と処理層の変換不一致

**発見日**: 2026-02-04
**分類**: anti-pattern
**根拠**: .ops/2026-02-04.md Context Strategy
**内容**:
- getStemReading（表示用）と選択肢生成（処理用）で異なる変換を適用し重複問題が発生
- **同一データに対する変換は単一の関数に統一する**

## データ構造の情報をUI層が無視

**発見日**: 2026-02-04
**分類**: anti-pattern
**根拠**: .ops/2026-02-04.md Context Strategy
**内容**:
- データ構造にcharacterフィールドがあるのにUIが活用せず、問い方と正解が不整合に
- **UIはデータ構造が持つ情報を最大限活用する。冗長な再計算をしない**
